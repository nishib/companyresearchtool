{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["file:///Users/nishibhagat/stagehandsdk/src/utils.ts"],"sourcesContent":["import chalk from 'chalk';\n\nexport function log(message: string, type: 'info' | 'success' | 'error' | 'warn' = 'info') {\n  const prefix = {\n    info: chalk.blue('ℹ'),\n    success: chalk.green('✓'),\n    error: chalk.red('✗'),\n    warn: chalk.yellow('⚠'),\n  };\n\n  console.log(`${prefix[type]} ${message}`);\n}\n\nexport function formatDate(): string {\n  return new Date().toISOString().split('T')[0];\n}\n\nexport function sanitizeFilename(name: string): string {\n  return name\n    .toLowerCase()\n    .replace(/[^a-z0-9]/g, '-')\n    .replace(/-+/g, '-')\n    .replace(/^-|-$/g, '');\n}\n\nexport async function delay(ms: number): Promise<void> {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n\nexport function buildSearchQuery(companyName: string, ...keywords: string[]): string {\n  return `${companyName} ${keywords.join(' ')}`;\n}\n\nexport interface RetryOptions {\n  maxRetries?: number;\n  initialDelay?: number;\n  maxDelay?: number;\n  backoffMultiplier?: number;\n  shouldRetry?: (error: any) => boolean;\n}\n\n/**\n * Retry a function with exponential backoff\n */\nexport async function retryWithBackoff<T>(\n  fn: () => Promise<T>,\n  options: RetryOptions = {}\n): Promise<T> {\n  const {\n    maxRetries = 3,\n    initialDelay = 1000,\n    maxDelay = 10000,\n    backoffMultiplier = 2,\n    shouldRetry = () => true,\n  } = options;\n\n  let lastError: any;\n  let currentDelay = initialDelay;\n\n  for (let attempt = 0; attempt <= maxRetries; attempt++) {\n    try {\n      return await fn();\n    } catch (error) {\n      lastError = error;\n\n      // Check if we should retry this error\n      if (!shouldRetry(error)) {\n        throw error;\n      }\n\n      // If this was the last attempt, throw the error\n      if (attempt === maxRetries) {\n        throw error;\n      }\n\n      // Log retry attempt\n      const errorMessage = error instanceof Error ? error.message : String(error);\n      log(\n        `Attempt ${attempt + 1}/${maxRetries + 1} failed: ${errorMessage}. Retrying in ${currentDelay}ms...`,\n        'warn'\n      );\n\n      // Wait before retrying\n      await delay(currentDelay);\n\n      // Increase delay for next attempt (exponential backoff)\n      currentDelay = Math.min(currentDelay * backoffMultiplier, maxDelay);\n    }\n  }\n\n  throw lastError;\n}\n\n/**\n * Check if an error is retryable (network errors, timeouts, parse errors)\n */\nexport function isRetryableError(error: any): boolean {\n  if (!error) return false;\n\n  const errorMessage = error instanceof Error ? error.message : String(error);\n  const errorName = error instanceof Error ? error.name : error?.constructor?.name || '';\n\n  // Retry on parse errors, timeouts, and network errors\n  return (\n    errorName.includes('ParseError') ||\n    errorName.includes('TimeoutError') ||\n    errorName.includes('NetworkError') ||\n    errorMessage.includes('parse') ||\n    errorMessage.includes('timeout') ||\n    errorMessage.includes('Timeout') ||\n    errorMessage.includes('network') ||\n    errorMessage.includes('ECONNREFUSED') ||\n    errorMessage.includes('ETIMEDOUT') ||\n    errorMessage.includes('Failed to parse')\n  );\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAAA;;AAEO,SAAS,IAAI,OAAe,EAAE,OAA8C,MAAM;IACvF,MAAM,SAAS;QACb,MAAM,qKAAK,CAAC,IAAI,CAAC;QACjB,SAAS,qKAAK,CAAC,KAAK,CAAC;QACrB,OAAO,qKAAK,CAAC,GAAG,CAAC;QACjB,MAAM,qKAAK,CAAC,MAAM,CAAC;IACrB;IAEA,QAAQ,GAAG,CAAC,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,SAAS;AAC1C;AAEO,SAAS;IACd,OAAO,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;AAC/C;AAEO,SAAS,iBAAiB,IAAY;IAC3C,OAAO,KACJ,WAAW,GACX,OAAO,CAAC,cAAc,KACtB,OAAO,CAAC,OAAO,KACf,OAAO,CAAC,UAAU;AACvB;AAEO,eAAe,MAAM,EAAU;IACpC,OAAO,IAAI,QAAQ,CAAA,UAAW,WAAW,SAAS;AACpD;AAEO,SAAS,iBAAiB,WAAmB,EAAE,GAAG,QAAkB;IACzE,OAAO,GAAG,YAAY,CAAC,EAAE,SAAS,IAAI,CAAC,MAAM;AAC/C;AAaO,eAAe,iBACpB,EAAoB,EACpB,UAAwB,CAAC,CAAC;IAE1B,MAAM,EACJ,aAAa,CAAC,EACd,eAAe,IAAI,EACnB,WAAW,KAAK,EAChB,oBAAoB,CAAC,EACrB,cAAc,IAAM,IAAI,EACzB,GAAG;IAEJ,IAAI;IACJ,IAAI,eAAe;IAEnB,IAAK,IAAI,UAAU,GAAG,WAAW,YAAY,UAAW;QACtD,IAAI;YACF,OAAO,MAAM;QACf,EAAE,OAAO,OAAO;YACd,YAAY;YAEZ,sCAAsC;YACtC,IAAI,CAAC,YAAY,QAAQ;gBACvB,MAAM;YACR;YAEA,gDAAgD;YAChD,IAAI,YAAY,YAAY;gBAC1B,MAAM;YACR;YAEA,oBAAoB;YACpB,MAAM,eAAe,iBAAiB,QAAQ,MAAM,OAAO,GAAG,OAAO;YACrE,IACE,CAAC,QAAQ,EAAE,UAAU,EAAE,CAAC,EAAE,aAAa,EAAE,SAAS,EAAE,aAAa,cAAc,EAAE,aAAa,KAAK,CAAC,EACpG;YAGF,uBAAuB;YACvB,MAAM,MAAM;YAEZ,wDAAwD;YACxD,eAAe,KAAK,GAAG,CAAC,eAAe,mBAAmB;QAC5D;IACF;IAEA,MAAM;AACR;AAKO,SAAS,iBAAiB,KAAU;IACzC,IAAI,CAAC,OAAO,OAAO;IAEnB,MAAM,eAAe,iBAAiB,QAAQ,MAAM,OAAO,GAAG,OAAO;IACrE,MAAM,YAAY,iBAAiB,QAAQ,MAAM,IAAI,GAAG,OAAO,aAAa,QAAQ;IAEpF,sDAAsD;IACtD,OACE,UAAU,QAAQ,CAAC,iBACnB,UAAU,QAAQ,CAAC,mBACnB,UAAU,QAAQ,CAAC,mBACnB,aAAa,QAAQ,CAAC,YACtB,aAAa,QAAQ,CAAC,cACtB,aAAa,QAAQ,CAAC,cACtB,aAAa,QAAQ,CAAC,cACtB,aAAa,QAAQ,CAAC,mBACtB,aAAa,QAAQ,CAAC,gBACtB,aAAa,QAAQ,CAAC;AAE1B"}},
    {"offset": {"line": 172, "column": 0}, "map": {"version":3,"sources":["file:///Users/nishibhagat/stagehandsdk/src/exa-recruiters.ts"],"sourcesContent":["import Exa from 'exa-js';\nimport { Recruiters, Recruiter } from './types';\nimport { log } from './utils';\n\n/**\n * Fast recruiter finder using Exa AI Search API\n * Finds actual recruiters currently employed at a company\n */\nexport class ExaRecruiterFinder {\n  private exa: Exa;\n\n  constructor() {\n    const apiKey = process.env.EXA_API_KEY;\n    if (!apiKey) {\n      throw new Error('EXA_API_KEY is required for fast recruiter search');\n    }\n    this.exa = new Exa(apiKey);\n  }\n\n  /**\n   * Find recruiters currently working at a company using Exa\n   * Returns only verified LinkedIn profiles of actual employees\n   */\n  async findRecruiters(companyName: string): Promise<Recruiters> {\n    log(`[Exa] Finding recruiters at: ${companyName}`, 'info');\n    const startTime = Date.now();\n\n    const recruiters: Recruiter[] = [];\n    const seenNames = new Set<string>();\n\n    // Focus on LinkedIn profiles - the most reliable source for current employees\n    const linkedinResults = await this.searchLinkedInProfiles(companyName);\n\n    // Add unique recruiters\n    for (const recruiter of linkedinResults) {\n      const nameKey = recruiter.name.toLowerCase();\n      if (!seenNames.has(nameKey) && this.isValidRecruiter(recruiter)) {\n        seenNames.add(nameKey);\n        recruiters.push(recruiter);\n      }\n    }\n\n    const duration = ((Date.now() - startTime) / 1000).toFixed(2);\n    log(`[Exa] Found ${recruiters.length} verified recruiters in ${duration}s`, 'success');\n\n    return recruiters.slice(0, 10);\n  }\n\n  /**\n   * Search for LinkedIn profiles of recruiters at the company\n   */\n  private async searchLinkedInProfiles(companyName: string): Promise<Recruiter[]> {\n    log('[Exa] Searching LinkedIn profiles...', 'info');\n\n    const recruiters: Recruiter[] = [];\n\n    try {\n      // Search specifically for LinkedIn profile pages with recruiting titles\n      const queries = [\n        `site:linkedin.com/in recruiter \"${companyName}\"`,\n        `site:linkedin.com/in \"talent acquisition\" \"${companyName}\"`,\n        `site:linkedin.com/in \"technical recruiter\" \"${companyName}\"`,\n      ];\n\n      for (const query of queries) {\n        try {\n          const result = await this.exa.searchAndContents(query, {\n            type: 'auto',\n            numResults: 10,\n            text: { maxCharacters: 800 },\n            livecrawl: 'preferred',\n          });\n\n          for (const item of result.results) {\n            const recruiter = this.parseLinkedInProfile(item, companyName);\n            if (recruiter) {\n              recruiters.push(recruiter);\n            }\n          }\n        } catch (err) {\n          log(`[Exa] Query failed: ${query}`, 'warn');\n        }\n      }\n\n      log(`[Exa] Found ${recruiters.length} recruiters on LinkedIn`, 'success');\n      return recruiters;\n    } catch (error) {\n      log(`[Exa] LinkedIn search failed: ${error}`, 'warn');\n      return [];\n    }\n  }\n\n  /**\n   * Parse a LinkedIn profile result into a Recruiter object\n   */\n  private parseLinkedInProfile(\n    item: { url: string; title?: string; text?: string },\n    companyName: string\n  ): Recruiter | null {\n    // Must be a LinkedIn profile URL (linkedin.com/in/)\n    if (!item.url || !item.url.includes('linkedin.com/in/')) {\n      return null;\n    }\n\n    const title = item.title || '';\n    const text = (item.text || '').toLowerCase();\n    const companyLower = companyName.toLowerCase();\n\n    // Verify this person works at the target company\n    const worksAtCompany =\n      text.includes(companyLower) ||\n      title.toLowerCase().includes(companyLower);\n\n    if (!worksAtCompany) {\n      return null;\n    }\n\n    // Parse name from LinkedIn title format: \"FirstName LastName - Title - Company | LinkedIn\"\n    // or \"FirstName LastName | LinkedIn\"\n    const namePart = title.split(/\\s*[-–|]\\s*/)[0]?.trim() || '';\n\n    // Validate it looks like a real name (First Last format)\n    if (!this.isValidPersonName(namePart)) {\n      return null;\n    }\n\n    // Extract job title from the profile\n    const jobTitle = this.extractJobTitle(title, text);\n\n    // Must have a recruiting-related title\n    if (!this.isRecruiterTitle(jobTitle) && !this.hasRecruiterKeywords(text)) {\n      return null;\n    }\n\n    return {\n      name: namePart,\n      title: jobTitle || 'Recruiter',\n      linkedInUrl: item.url,\n      department: this.extractDepartment(text),\n    };\n  }\n\n  /**\n   * Check if a string looks like a valid person name\n   */\n  private isValidPersonName(name: string): boolean {\n    if (!name || name.length < 3 || name.length > 50) {\n      return false;\n    }\n\n    // Must have at least two words (first and last name)\n    const parts = name.split(/\\s+/);\n    if (parts.length < 2) {\n      return false;\n    }\n\n    // Each part should start with a capital letter and be mostly letters\n    for (const part of parts) {\n      if (!/^[A-Z][a-zA-Z'-]+$/.test(part)) {\n        return false;\n      }\n    }\n\n    // Filter out common non-name patterns\n    const invalidPatterns = [\n      /^(the|a|an)\\s/i,\n      /recruiter/i,\n      /hiring/i,\n      /jobs?$/i,\n      /career/i,\n      /guide/i,\n      /team/i,\n      /company/i,\n      /salary/i,\n      /contract/i,\n      /listing/i,\n    ];\n\n    for (const pattern of invalidPatterns) {\n      if (pattern.test(name)) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  /**\n   * Extract job title from LinkedIn profile\n   */\n  private extractJobTitle(title: string, text: string): string {\n    // Try to extract from title (format: \"Name - Title - Company\")\n    const parts = title.split(/\\s*[-–|]\\s*/);\n    if (parts.length >= 2) {\n      const potentialTitle = parts[1]?.trim();\n      if (potentialTitle && potentialTitle.length > 2 && potentialTitle.length < 60) {\n        return potentialTitle;\n      }\n    }\n\n    // Try to find title in text\n    const titlePatterns = [\n      /(technical recruiter|senior recruiter|lead recruiter|staff recruiter)/i,\n      /(talent acquisition (?:manager|lead|specialist|partner))/i,\n      /(recruiting (?:manager|lead|coordinator))/i,\n      /(head of (?:talent|recruiting|people))/i,\n      /(hr (?:manager|director|business partner))/i,\n      /(university recruiter|campus recruiter)/i,\n    ];\n\n    for (const pattern of titlePatterns) {\n      const match = text.match(pattern);\n      if (match) {\n        return match[1].split(' ').map(w =>\n          w.charAt(0).toUpperCase() + w.slice(1).toLowerCase()\n        ).join(' ');\n      }\n    }\n\n    return 'Recruiter';\n  }\n\n  /**\n   * Check if a title indicates a recruiting role\n   */\n  private isRecruiterTitle(title: string): boolean {\n    const titleLower = title.toLowerCase();\n    const recruiterKeywords = [\n      'recruiter',\n      'recruiting',\n      'talent acquisition',\n      'talent partner',\n      'sourcer',\n      'head of talent',\n      'head of people',\n      'hr manager',\n      'hr director',\n      'people operations',\n    ];\n\n    return recruiterKeywords.some(keyword => titleLower.includes(keyword));\n  }\n\n  /**\n   * Check if profile text contains recruiter-related keywords\n   */\n  private hasRecruiterKeywords(text: string): boolean {\n    const keywords = [\n      'recruiting',\n      'talent acquisition',\n      'sourcing candidates',\n      'hiring manager',\n      'full-cycle recruiting',\n      'technical recruiting',\n      'campus recruiting',\n    ];\n\n    return keywords.some(keyword => text.includes(keyword));\n  }\n\n  /**\n   * Validate a recruiter object\n   */\n  private isValidRecruiter(recruiter: Recruiter): boolean {\n    return (\n      this.isValidPersonName(recruiter.name) &&\n      recruiter.linkedInUrl?.includes('linkedin.com/in/') === true\n    );\n  }\n\n  /**\n   * Extract department from profile text\n   */\n  private extractDepartment(text: string): string | undefined {\n    const deptKeywords = [\n      { keyword: 'engineering', dept: 'Engineering' },\n      { keyword: 'technical', dept: 'Engineering' },\n      { keyword: 'software', dept: 'Engineering' },\n      { keyword: 'product', dept: 'Product' },\n      { keyword: 'design', dept: 'Design' },\n      { keyword: 'sales', dept: 'Sales' },\n      { keyword: 'marketing', dept: 'Marketing' },\n      { keyword: 'university', dept: 'University' },\n      { keyword: 'campus', dept: 'University' },\n      { keyword: 'executive', dept: 'Executive' },\n      { keyword: 'leadership', dept: 'Executive' },\n    ];\n\n    for (const { keyword, dept } of deptKeywords) {\n      if (text.includes(keyword)) {\n        return dept;\n      }\n    }\n\n    return undefined;\n  }\n}\n\nexport function isExaAvailable(): boolean {\n  return !!process.env.EXA_API_KEY;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 460, "column": 0}, "map": {"version":3,"sources":["file:///Users/nishibhagat/stagehandsdk/src/init.ts"],"sourcesContent":["// This file MUST be imported first in server.ts and scraper.ts\n// It configures the environment to prevent pino-pretty errors in serverless environments\n\nimport { createRequire } from 'module';\nimport { Transform } from 'stream';\n\n// Detect if we're in a serverless/production environment\nconst isServerless = !!(\n  process.env.VERCEL ||\n  process.env.AWS_LAMBDA_FUNCTION_NAME ||\n  process.env.NETLIFY ||\n  process.env.NODE_ENV === 'production'\n);\n\nif (isServerless) {\n  console.log('[Init] Detected serverless environment, disabling pino-pretty');\n}\n\n// Configure environment variables to disable pino-pretty before any modules load\nprocess.env.LOG_LEVEL = process.env.LOG_LEVEL || 'info';\ndelete process.env.PINO_PRETTY; // Remove any pino-pretty config\ndelete process.env.PINO_TRANSPORT_TARGET; // Disable transports\n\n// Mock pino-pretty module to prevent it from loading\n// This is necessary because Stagehand SDK has pino-pretty as a dependency\nconst require = createRequire(import.meta.url);\nconst Module = require('module');\nconst originalRequire = Module.prototype.require;\n\nModule.prototype.require = function (id: string) {\n  // Intercept pino-pretty and return a no-op function\n  if (id === 'pino-pretty') {\n    return function pinoPrettyMock() {\n      // Return a basic transform stream that does nothing\n      return new Transform({\n        transform(chunk: any, encoding: string, callback: Function) {\n          callback(null, chunk);\n        }\n      });\n    };\n  }\n\n  // For all other requires, use the original\n  return originalRequire.apply(this, arguments as any);\n};\n\n// Set up global error/warning handler to suppress pino-pretty errors\nconst originalEmit = process.emit;\n(process as any).emit = function (event: any, ...args: any[]) {\n  // Suppress pino-pretty related warnings and errors\n  if (event === 'warning' && args[0]) {\n    const warning = args[0];\n    const message = warning?.message || String(warning);\n\n    if (message.includes('pino-pretty') || message.includes('pino') && message.includes('transport')) {\n      // Silently ignore pino-pretty warnings\n      return false;\n    }\n  }\n\n  if ((event === 'uncaughtException' || event === 'unhandledRejection')) {\n    const error = args[0];\n    if (error && typeof error === 'object') {\n      const message = error.message || String(error);\n\n      // Suppress pino-pretty transport errors\n      if (message.includes('unable to determine transport target') ||\n          message.includes('pino-pretty') ||\n          (message.includes('pino') && message.includes('target'))) {\n        console.warn('[Init] Suppressed pino-pretty error (expected in serverless)');\n        return true; // Mark as handled\n      }\n    }\n  }\n\n  // For all other events, use original emit\n  return originalEmit.apply(this, arguments as any);\n};\n\n// Prevent unhandled rejection crashes from pino-pretty\nprocess.on('unhandledRejection', (reason: any) => {\n  const message = reason?.message || String(reason);\n  if (message.includes('pino-pretty') || message.includes('unable to determine transport target')) {\n    // Ignore pino-pretty errors\n    return;\n  }\n  // Re-throw other unhandled rejections\n  throw reason;\n});\n\nexport {};\n"],"names":[],"mappings":";AAAA,+DAA+D;AAC/D,yFAAyF;AAEzF;AACA;;;;;;;;AAEA,yDAAyD;AACzD,MAAM,eAAe,CAAC,CAAC,CACrB,QAAQ,GAAG,CAAC,MAAM,IAClB,QAAQ,GAAG,CAAC,wBAAwB,IACpC,QAAQ,GAAG,CAAC,OAAO,IACnB,oDAAyB,YAC3B;AAEA,IAAI,cAAc;IAChB,QAAQ,GAAG,CAAC;AACd;AAEA,iFAAiF;AACjF,QAAQ,GAAG,CAAC,SAAS,GAAG,QAAQ,GAAG,CAAC,SAAS,IAAI;AACjD,OAAO,QAAQ,GAAG,CAAC,WAAW,EAAE,gCAAgC;AAChE,OAAO,QAAQ,GAAG,CAAC,qBAAqB,EAAE,qBAAqB;AAE/D,qDAAqD;AACrD,0EAA0E;AAC1E,MAAM,UAAU,IAAA,sHAAa,EAAC,8BAAY,GAAG;AAC7C,MAAM;AACN,MAAM,kBAAkB,OAAO,SAAS,CAAC,OAAO;AAEhD,OAAO,SAAS,CAAC,OAAO,GAAG,SAAU,EAAU;IAC7C,oDAAoD;IACpD,IAAI,OAAO,eAAe;QACxB,OAAO,SAAS;YACd,oDAAoD;YACpD,OAAO,IAAI,kHAAS,CAAC;gBACnB,WAAU,KAAU,EAAE,QAAgB,EAAE,QAAkB;oBACxD,SAAS,MAAM;gBACjB;YACF;QACF;IACF;IAEA,2CAA2C;IAC3C,OAAO,gBAAgB,KAAK,CAAC,IAAI,EAAE;AACrC;AAEA,qEAAqE;AACrE,MAAM,eAAe,QAAQ,IAAI;AAChC,QAAgB,IAAI,GAAG,SAAU,KAAU,EAAE,GAAG,IAAW;IAC1D,mDAAmD;IACnD,IAAI,UAAU,aAAa,IAAI,CAAC,EAAE,EAAE;QAClC,MAAM,UAAU,IAAI,CAAC,EAAE;QACvB,MAAM,UAAU,SAAS,WAAW,OAAO;QAE3C,IAAI,QAAQ,QAAQ,CAAC,kBAAkB,QAAQ,QAAQ,CAAC,WAAW,QAAQ,QAAQ,CAAC,cAAc;YAChG,uCAAuC;YACvC,OAAO;QACT;IACF;IAEA,IAAK,UAAU,uBAAuB,UAAU,sBAAuB;QACrE,MAAM,QAAQ,IAAI,CAAC,EAAE;QACrB,IAAI,SAAS,OAAO,UAAU,UAAU;YACtC,MAAM,UAAU,MAAM,OAAO,IAAI,OAAO;YAExC,wCAAwC;YACxC,IAAI,QAAQ,QAAQ,CAAC,2CACjB,QAAQ,QAAQ,CAAC,kBAChB,QAAQ,QAAQ,CAAC,WAAW,QAAQ,QAAQ,CAAC,WAAY;gBAC5D,QAAQ,IAAI,CAAC;gBACb,OAAO,MAAM,kBAAkB;YACjC;QACF;IACF;IAEA,0CAA0C;IAC1C,OAAO,aAAa,KAAK,CAAC,IAAI,EAAE;AAClC;AAEA,uDAAuD;AACvD,QAAQ,EAAE,CAAC,sBAAsB,CAAC;IAChC,MAAM,UAAU,QAAQ,WAAW,OAAO;IAC1C,IAAI,QAAQ,QAAQ,CAAC,kBAAkB,QAAQ,QAAQ,CAAC,yCAAyC;QAC/F,4BAA4B;QAC5B;IACF;IACA,sCAAsC;IACtC,MAAM;AACR"}},
    {"offset": {"line": 661, "column": 0}, "map": {"version":3,"sources":["file:///Users/nishibhagat/stagehandsdk/src/types.ts"],"sourcesContent":["import { z } from 'zod';\n\n// Zod schemas for structured data extraction\nexport const CompanyInfoSchema = z.object({\n  name: z.string().describe('Official company name'),\n  mission: z.string().nullish().describe('Company mission statement or tagline'),\n  description: z.string().nullish().describe('Brief company description or about section'),\n  headquarters: z.string().nullish().describe('Headquarters location'),\n  industry: z.string().nullish().describe('Industry or sector'),\n  website: z.string().nullish().describe('Official website URL'),\n});\n\nexport const NewsItemSchema = z.object({\n  title: z.string().describe('News headline or title'),\n  date: z.string().describe('Publication date'),\n  source: z.string().describe('News source or publication'),\n  summary: z.string().describe('Brief summary of the news'),\n  url: z.string().optional().describe('Link to full article'),\n});\n\nexport const NewsSchema = z.object({\n  articles: z.array(NewsItemSchema).describe('Recent company news items'),\n});\n\nexport const TechStackSchema = z.object({\n  languages: z.array(z.string()).describe('Programming languages used'),\n  frameworks: z.array(z.string()).describe('Frameworks and libraries'),\n  tools: z.array(z.string()).describe('Development tools and platforms'),\n  infrastructure: z.array(z.string()).describe('Cloud and infrastructure technologies'),\n});\n\nexport const CompetitorSchema = z.object({\n  name: z.string().describe('Competitor company name'),\n  description: z.string().nullish().describe('Brief description of what they do'),\n  website: z.string().nullish().describe('Competitor website URL'),\n});\n\nexport const CompetitorsSchema = z.object({\n  competitors: z.array(CompetitorSchema).describe('Main competitors of the company'),\n});\n\n// Recruiter schemas for finding HR contacts\nexport const RecruiterSchema = z.object({\n  name: z.string().describe('Full name of the recruiter'),\n  title: z.string().describe('Job title (e.g., Technical Recruiter, Talent Acquisition Manager)'),\n  linkedInUrl: z.string().optional().describe('LinkedIn profile URL'),\n  email: z.string().optional().describe('Email address if publicly available'),\n  department: z.string().optional().describe('Department or team they recruit for'),\n});\n\nexport const RecruitersSchema = z.object({\n  recruiters: z.array(RecruiterSchema).describe('Recruiters and HR contacts at the company'),\n});\n\n// TypeScript types\nexport type CompanyInfo = z.infer<typeof CompanyInfoSchema>;\nexport type NewsItem = z.infer<typeof NewsItemSchema>;\nexport type TechStack = z.infer<typeof TechStackSchema>;\nexport type Competitor = z.infer<typeof CompetitorSchema>;\nexport type Recruiter = z.infer<typeof RecruiterSchema>;\n\n// News, Competitors, and Recruiters are arrays of items\nexport type News = NewsItem[];\nexport type Competitors = Competitor[];\nexport type Recruiters = Recruiter[];\n\nexport interface CompanyResearchReport {\n  companyInfo: CompanyInfo;\n  news: News;\n  techStack: TechStack;\n  competitors: Competitors;\n  researchDate: string;\n}\n\nexport interface ResearchOptions {\n  companyName: string;\n  outputPath?: string;\n  verbose?: boolean;\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAAA;;AAGO,MAAM,oBAAoB,wJAAC,CAAC,MAAM,CAAC;IACxC,MAAM,wJAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;IAC1B,SAAS,wJAAC,CAAC,MAAM,GAAG,OAAO,GAAG,QAAQ,CAAC;IACvC,aAAa,wJAAC,CAAC,MAAM,GAAG,OAAO,GAAG,QAAQ,CAAC;IAC3C,cAAc,wJAAC,CAAC,MAAM,GAAG,OAAO,GAAG,QAAQ,CAAC;IAC5C,UAAU,wJAAC,CAAC,MAAM,GAAG,OAAO,GAAG,QAAQ,CAAC;IACxC,SAAS,wJAAC,CAAC,MAAM,GAAG,OAAO,GAAG,QAAQ,CAAC;AACzC;AAEO,MAAM,iBAAiB,wJAAC,CAAC,MAAM,CAAC;IACrC,OAAO,wJAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;IAC3B,MAAM,wJAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;IAC1B,QAAQ,wJAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;IAC5B,SAAS,wJAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;IAC7B,KAAK,wJAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,QAAQ,CAAC;AACtC;AAEO,MAAM,aAAa,wJAAC,CAAC,MAAM,CAAC;IACjC,UAAU,wJAAC,CAAC,KAAK,CAAC,gBAAgB,QAAQ,CAAC;AAC7C;AAEO,MAAM,kBAAkB,wJAAC,CAAC,MAAM,CAAC;IACtC,WAAW,wJAAC,CAAC,KAAK,CAAC,wJAAC,CAAC,MAAM,IAAI,QAAQ,CAAC;IACxC,YAAY,wJAAC,CAAC,KAAK,CAAC,wJAAC,CAAC,MAAM,IAAI,QAAQ,CAAC;IACzC,OAAO,wJAAC,CAAC,KAAK,CAAC,wJAAC,CAAC,MAAM,IAAI,QAAQ,CAAC;IACpC,gBAAgB,wJAAC,CAAC,KAAK,CAAC,wJAAC,CAAC,MAAM,IAAI,QAAQ,CAAC;AAC/C;AAEO,MAAM,mBAAmB,wJAAC,CAAC,MAAM,CAAC;IACvC,MAAM,wJAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;IAC1B,aAAa,wJAAC,CAAC,MAAM,GAAG,OAAO,GAAG,QAAQ,CAAC;IAC3C,SAAS,wJAAC,CAAC,MAAM,GAAG,OAAO,GAAG,QAAQ,CAAC;AACzC;AAEO,MAAM,oBAAoB,wJAAC,CAAC,MAAM,CAAC;IACxC,aAAa,wJAAC,CAAC,KAAK,CAAC,kBAAkB,QAAQ,CAAC;AAClD;AAGO,MAAM,kBAAkB,wJAAC,CAAC,MAAM,CAAC;IACtC,MAAM,wJAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;IAC1B,OAAO,wJAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;IAC3B,aAAa,wJAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,QAAQ,CAAC;IAC5C,OAAO,wJAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,QAAQ,CAAC;IACtC,YAAY,wJAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,QAAQ,CAAC;AAC7C;AAEO,MAAM,mBAAmB,wJAAC,CAAC,MAAM,CAAC;IACvC,YAAY,wJAAC,CAAC,KAAK,CAAC,iBAAiB,QAAQ,CAAC;AAChD"}},
    {"offset": {"line": 728, "column": 0}, "map": {"version":3,"sources":["file:///Users/nishibhagat/stagehandsdk/src/scraper.ts"],"sourcesContent":["// MUST be first - configures environment to prevent pino errors\nimport './init';\nimport 'dotenv/config';\nimport { Stagehand } from '@browserbasehq/stagehand';\nimport { z } from 'zod';\nimport {\n  CompanyInfo,\n  CompanyInfoSchema,\n  News,\n  NewsSchema,\n  TechStack,\n  TechStackSchema,\n  Competitors,\n  CompetitorsSchema,\n  Recruiters,\n  RecruitersSchema,\n  CompanyResearchReport,\n} from './types';\nimport { log, delay, retryWithBackoff, isRetryableError } from './utils';\n\nexport class CompanyResearcher {\n  private stagehand: Stagehand;\n  private verbose: boolean;\n\n  constructor(verbose: boolean = false) {\n    this.verbose = verbose;\n\n    // Determine which LLM provider to use based on available API keys\n    const modelConfig = this.getModelConfig();\n\n    // Use BROWSERBASE if credentials available, otherwise LOCAL\n    const env = process.env.BROWSERBASE_API_KEY && process.env.BROWSERBASE_PROJECT_ID\n      ? 'BROWSERBASE' as const\n      : 'LOCAL' as const;\n\n    this.stagehand = new Stagehand({\n      env,\n      verbose: verbose ? 1 : 0,\n      apiKey: process.env.BROWSERBASE_API_KEY,\n      projectId: process.env.BROWSERBASE_PROJECT_ID,\n      disablePino: true,\n      disableAPI: true, // Force client-side extraction (API mode is unstable)\n      model: modelConfig.modelName ? {\n        ...modelConfig.modelClientOptions,\n        modelName: modelConfig.modelName,\n      } : undefined,\n    });\n\n    if (verbose) {\n      log(`Environment: ${env}`, 'info');\n    }\n  }\n\n  private getModelConfig(): { modelName?: string; modelClientOptions?: any } {\n    // Priority: Google Gemini > Anthropic Claude > OpenAI GPT\n    if (process.env.GOOGLE_API_KEY) {\n      return {\n        // Using gemini-2.0-flash (latest stable Gemini model supported by Stagehand)\n        modelName: 'gemini-2.0-flash',\n        modelClientOptions: {\n          apiKey: process.env.GOOGLE_API_KEY,\n        },\n      };\n    } else if (process.env.ANTHROPIC_API_KEY) {\n      return {\n        modelName: 'claude-3-5-sonnet-20241022',\n        modelClientOptions: {\n          apiKey: process.env.ANTHROPIC_API_KEY,\n        },\n      };\n    } else if (process.env.OPENAI_API_KEY) {\n      return {\n        modelName: 'gpt-4o',\n        modelClientOptions: {\n          apiKey: process.env.OPENAI_API_KEY,\n        },\n      };\n    }\n\n    return {};\n  }\n\n  private guessCompanyWebsite(companyName: string): string {\n    // Common company name to website mappings\n    const knownCompanies: Record<string, string> = {\n      'stripe': 'https://stripe.com',\n      'anthropic': 'https://www.anthropic.com',\n      'openai': 'https://openai.com',\n      'google': 'https://www.google.com/about',\n      'meta': 'https://about.meta.com',\n      'facebook': 'https://about.meta.com',\n      'amazon': 'https://www.aboutamazon.com',\n      'microsoft': 'https://www.microsoft.com/about',\n      'apple': 'https://www.apple.com/about',\n      'netflix': 'https://about.netflix.com',\n      'uber': 'https://www.uber.com/about',\n      'airbnb': 'https://www.airbnb.com/about',\n      'shopify': 'https://www.shopify.com/about',\n      'salesforce': 'https://www.salesforce.com/company',\n    };\n\n    const normalized = companyName.toLowerCase().trim();\n\n    if (knownCompanies[normalized]) {\n      return knownCompanies[normalized];\n    }\n\n    // Guess based on company name\n    return `https://www.${normalized}.com`;\n  }\n\n  async initialize(): Promise<void> {\n    // Initialize Stagehand (required in V3)\n    await this.stagehand.init();\n\n    if (this.verbose) {\n      log('Stagehand initialized successfully', 'success');\n\n      // Show session URL if using Browserbase\n      if (this.stagehand.browserbaseSessionID) {\n        log(`Watch live: https://browserbase.com/sessions/${this.stagehand.browserbaseSessionID}`, 'info');\n      }\n    }\n  }\n\n  async close(): Promise<void> {\n    await this.stagehand.close();\n  }\n\n  /**\n   * Get the active page from Stagehand context\n   */\n  private getPage(): any {\n    const pages = this.stagehand.context.pages();\n    if (!pages || pages.length === 0) {\n      throw new Error('No page available in Stagehand context. Make sure initialize() was called.');\n    }\n    return pages[0];\n  }\n\n  async research(companyName: string): Promise<CompanyResearchReport> {\n    try {\n      log(`Starting research for: ${companyName}`, 'info');\n\n      // Run research tasks sequentially to avoid navigation conflicts\n      const companyInfo = await this.extractCompanyInfo(companyName);\n      const competitors = await this.extractCompetitors(companyName);\n      const news = await this.extractNews(companyName);\n      const techStack = await this.extractTechStack(companyName);\n\n      return {\n        companyInfo,\n        news,\n        techStack,\n        competitors,\n        researchDate: new Date().toISOString(),\n      };\n    } catch (error) {\n      log(`Research failed: ${error}`, 'error');\n      throw error;\n    }\n  }\n\n  private async extractCompanyInfo(companyName: string): Promise<CompanyInfo> {\n    log('Extracting company information...', 'info');\n\n    try {\n      const page = this.getPage();\n\n      // Navigate directly to the company website\n      const companyWebsite = this.guessCompanyWebsite(companyName);\n      log(`Navigating to ${companyWebsite}...`, 'info');\n\n      // Use waitUntil to handle page redirects properly\n      try {\n        await page.goto(companyWebsite, {\n          waitUntil: 'networkidle',\n          timeoutMs: 30000,\n        });\n      } catch (navError) {\n        // If navigation fails, try with domcontentloaded instead\n        log('Network idle failed, trying domcontentloaded...', 'warn');\n        await page.goto(companyWebsite, {\n          waitUntil: 'domcontentloaded',\n          timeoutMs: 30000,\n        });\n      }\n\n      await delay(5000); // Extra wait for dynamic content\n\n      // Extract company information from the website with retry logic\n      let companyInfo;\n      try {\n        log(`[Extract] Starting extraction for ${companyName} from ${companyWebsite}`, 'info');\n\n        companyInfo = await retryWithBackoff(\n          async () => {\n            return await this.stagehand.extract(\n              `You are researching ${companyName}. Extract ALL available information using the page content as primary source, but MUST supplement with your general knowledge for any missing details.\\n\\n` +\n              'REQUIRED FIELDS (do NOT return null - use your knowledge if not on page):\\n' +\n              `- name: \"${companyName}\" or official name from page\\n` +\n              `- description: Write 4-6 sentences describing what ${companyName} does, their products/services, market position, and key achievements. Use page content + your knowledge of the company.\\n` +\n              `- mission: Write 4-6 sentences about ${companyName}'s mission, purpose, values and goals. Use page content + your knowledge.\\n` +\n              `- headquarters: City and country/state (check your knowledge of ${companyName}'s headquarters)\\n` +\n              `- industry: Specific sector (e.g., \"AI Safety\", \"E-commerce Platform\", \"Payment Processing\")\\n` +\n              `- website: Official URL\\n\\n` +\n              `CRITICAL: For well-known companies like ${companyName}, you likely know their headquarters and industry. Do NOT return null for these fields - use your training data knowledge to fill them in accurately.`,\n              CompanyInfoSchema\n            );\n          },\n          {\n            maxRetries: 2,\n            initialDelay: 2000,\n            shouldRetry: isRetryableError,\n          }\n        );\n\n        log('Company information extracted', 'success');\n        console.log(`[Extract] Successfully extracted data:`, JSON.stringify(companyInfo, null, 2));\n\n        // STRICT VALIDATION: Fill in missing fields individually with targeted prompts\n        if (!companyInfo.headquarters) {\n          log('Headquarters is missing, using LLM knowledge...', 'info');\n          try {\n            const result = await this.stagehand.extract(\n              `Where is ${companyName}'s headquarters located? Respond with city and state/country (e.g., \"San Francisco, California\", \"London, UK\", \"New York, NY\"). Use your knowledge of ${companyName}.`,\n              z.object({ headquarters: z.string() })\n            );\n            companyInfo.headquarters = result.headquarters || \"Location not specified\";\n            log(`Headquarters filled: ${companyInfo.headquarters}`, 'success');\n          } catch (err) {\n            companyInfo.headquarters = \"Location not specified\";\n          }\n        }\n\n        if (!companyInfo.industry) {\n          log('Industry is missing, using LLM knowledge...', 'info');\n          try {\n            const result = await this.stagehand.extract(\n              `What industry or sector does ${companyName} operate in? Respond with a specific industry (e.g., \"AI Safety\", \"E-commerce Platform\", \"Payment Processing\", \"Browser Automation\"). Use your knowledge of ${companyName}.`,\n              z.object({ industry: z.string() })\n            );\n            companyInfo.industry = result.industry || \"Technology\";\n            log(`Industry filled: ${companyInfo.industry}`, 'success');\n          } catch (err) {\n            companyInfo.industry = \"Technology\";\n          }\n        }\n\n        if (!companyInfo.description) {\n          log('Description is missing, using LLM knowledge...', 'info');\n          try {\n            const result = await this.stagehand.extract(\n              `Write a 4-6 sentence description of ${companyName}. Include what they do, their main products/services, and their market position. Use your knowledge of ${companyName}.`,\n              z.object({ description: z.string() })\n            );\n            companyInfo.description = result.description || `${companyName} is a technology company.`;\n            log(`Description filled (length: ${companyInfo.description?.length || 0})`, 'success');\n          } catch (err) {\n            companyInfo.description = `${companyName} is a technology company.`;\n          }\n        }\n\n        // GUARANTEE: Ensure website is always set\n        companyInfo.website = companyWebsite;\n\n        log('All required fields guaranteed', 'success');\n\n        return companyInfo;\n      } catch (extractError) {\n        const errorMessage = extractError instanceof Error ? extractError.message : String(extractError);\n        const errorStack = extractError instanceof Error ? extractError.stack : undefined;\n        log(`Failed to extract company info after retries: ${errorMessage}`, 'error');\n        console.error(`[Extract] Failed to extract company info:`, {\n          error: errorMessage,\n          stack: errorStack,\n          companyName,\n          website: companyWebsite,\n          errorType: extractError?.constructor?.name,\n          errorDetails: extractError\n        });\n        throw extractError; // Re-throw to be caught by outer catch\n      }\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : String(error);\n      const errorStack = error instanceof Error ? error.stack : undefined;\n      log(`Failed to extract company info (outer catch): ${errorMessage}`, 'error');\n      console.error(`[Extract] Outer error catch:`, {\n        error: errorMessage,\n        stack: errorStack,\n        errorType: error?.constructor?.name,\n      });\n      // Return minimal info if extraction fails\n      return {\n        name: companyName,\n        mission: 'Not found',\n        description: 'Not found',\n      };\n    }\n  }\n\n  private async extractCompetitors(companyName: string): Promise<Competitors> {\n    log('Extracting competitors...', 'info');\n\n    try {\n      const page = this.getPage();\n\n      // Use current page context (already on company website)\n      await delay(2000);\n\n      // Extract competitors using LLM knowledge + page context\n      let competitorsData;\n      try {\n        log(`[Extract] Starting competitors extraction for ${companyName}`, 'info');\n        competitorsData = await this.stagehand.extract(\n          `Based on the visible content and your knowledge of ${companyName}, identify 5-7 main competitors in the same industry. For each competitor, provide:\\n` +\n          '- Company name (exact official name)\\n' +\n          '- Brief description of what they do and how they compete (2-3 lines explaining their products/services)\\n' +\n          '- Website URL (if known)\\n' +\n          'Use both the page content and your general knowledge of the industry.',\n          CompetitorsSchema\n        );\n        const competitors = competitorsData.competitors || [];\n        log(`Extracted ${competitors.length} competitors`, 'success');\n        console.log(`[Extract] Successfully extracted competitors:`, JSON.stringify(competitorsData, null, 2));\n        return competitors.slice(0, 7); // Limit to 7 competitors\n      } catch (extractError) {\n        const errorMessage = extractError instanceof Error ? extractError.message : String(extractError);\n        const errorStack = extractError instanceof Error ? extractError.stack : undefined;\n        log(`Failed to extract competitors: ${errorMessage}`, 'error');\n        console.error(`[Extract] Failed to extract competitors:`, {\n          error: errorMessage,\n          stack: errorStack,\n          companyName,\n          errorType: extractError?.constructor?.name,\n          errorDetails: extractError\n        });\n        throw extractError;\n      }\n    } catch (error) {\n      log(`Failed to extract competitors: ${error}`, 'warn');\n      return [];\n    }\n  }\n\n  private async extractNews(companyName: string): Promise<News> {\n    log('Extracting recent news...', 'info');\n\n    try {\n      const page = this.getPage();\n\n      // Navigate to company newsroom or blog\n      const companyWebsite = this.guessCompanyWebsite(companyName);\n      await page.goto(`${companyWebsite}/newsroom`);\n      await delay(2000);\n\n      // Extract news items from search results\n      let newsData;\n      try {\n        log(`[Extract] Starting news extraction for ${companyName}`, 'info');\n        newsData = await this.stagehand.extract(\n          'Extract the top 5 recent news articles about this company. For each article, get the title, date, source, and a brief summary. Only include news from the last 6 months if possible.',\n          NewsSchema\n        );\n        const news = newsData.articles || [];\n        log(`Extracted ${news.length} news items`, 'success');\n        console.log(`[Extract] Successfully extracted news:`, JSON.stringify(newsData, null, 2));\n        return news.slice(0, 5); // Limit to 5 items\n      } catch (extractError) {\n        const errorMessage = extractError instanceof Error ? extractError.message : String(extractError);\n        const errorStack = extractError instanceof Error ? extractError.stack : undefined;\n        log(`Failed to extract news: ${errorMessage}`, 'error');\n        console.error(`[Extract] Failed to extract news:`, {\n          error: errorMessage,\n          stack: errorStack,\n          companyName,\n          errorType: extractError?.constructor?.name,\n          errorDetails: extractError\n        });\n        throw extractError; // Re-throw to be caught by outer catch\n      }\n    } catch (error) {\n      log(`Failed to extract news: ${error}`, 'warn');\n      return [];\n    }\n  }\n\n  private async extractTechStack(companyName: string): Promise<TechStack> {\n    log('Detecting tech stack...', 'info');\n\n    try {\n      const page = this.getPage();\n\n      // Navigate to company careers page\n      const companyWebsite = this.guessCompanyWebsite(companyName);\n      await page.goto(`${companyWebsite}/careers`);\n      await delay(3000);\n\n      // Extract tech stack\n      let techStack;\n      try {\n        log(`[Extract] Starting tech stack extraction for ${companyName}`, 'info');\n        techStack = await this.stagehand.extract(\n          'Extract information about the technologies used by this company. Look for programming languages, frameworks, tools, and infrastructure. If this is a careers page, look at job listings for required skills. If this is a tech blog, look at technologies mentioned.',\n          TechStackSchema\n        );\n        log('Tech stack detected', 'success');\n        console.log(`[Extract] Successfully extracted tech stack:`, JSON.stringify(techStack, null, 2));\n        return techStack;\n      } catch (extractError) {\n        const errorMessage = extractError instanceof Error ? extractError.message : String(extractError);\n        const errorStack = extractError instanceof Error ? extractError.stack : undefined;\n        log(`Failed to extract tech stack: ${errorMessage}`, 'error');\n        console.error(`[Extract] Failed to extract tech stack:`, {\n          error: errorMessage,\n          stack: errorStack,\n          companyName,\n          errorType: extractError?.constructor?.name,\n          errorDetails: extractError\n        });\n        throw extractError; // Re-throw to be caught by outer catch\n      }\n    } catch (error) {\n      log(`Failed to extract tech stack: ${error}`, 'warn');\n      // Return empty tech stack if extraction fails\n      return {\n        languages: [],\n        frameworks: [],\n        tools: [],\n        infrastructure: [],\n      };\n    }\n  }\n\n  /**\n   * Extract recruiters from LinkedIn and company website\n   * Searches for recruiters, talent acquisition, and HR professionals\n   */\n  async extractRecruiters(companyName: string): Promise<Recruiters> {\n    log('Extracting recruiters...', 'info');\n\n    const recruiters: Recruiters = [];\n\n    try {\n      const page = this.getPage();\n\n      // Step 1: Try LinkedIn search for recruiters\n      log('Searching LinkedIn for recruiters...', 'info');\n      try {\n        // Search LinkedIn for company recruiters\n        const linkedInSearchUrl = `https://www.linkedin.com/search/results/people/?keywords=${encodeURIComponent(companyName + ' recruiter')}&origin=GLOBAL_SEARCH_HEADER`;\n        await page.goto(linkedInSearchUrl, {\n          waitUntil: 'domcontentloaded',\n          timeoutMs: 30000,\n        });\n        await delay(3000); // Wait for content to load\n\n        // Extract recruiter profiles from LinkedIn search results\n        const linkedInRecruiters = await retryWithBackoff(\n          async () => {\n            return await this.stagehand.extract(\n              `Extract recruiter profiles from LinkedIn search results. Look for people with titles containing \"Recruiter\", \"Talent Acquisition\", \"HR\", \"People Operations\", or similar recruiting roles at ${companyName}.\\n\\n` +\n              'For each person found, extract:\\n' +\n              '- Full name\\n' +\n              '- Job title (exact title from their profile)\\n' +\n              '- LinkedIn profile URL\\n' +\n              '- Department they recruit for (if mentioned)\\n\\n' +\n              `Only include people who work at or recruit for ${companyName}. Limit to 10 recruiters.`,\n              RecruitersSchema\n            );\n          },\n          {\n            maxRetries: 2,\n            initialDelay: 2000,\n            shouldRetry: isRetryableError,\n          }\n        );\n\n        if (linkedInRecruiters?.recruiters?.length > 0) {\n          recruiters.push(...linkedInRecruiters.recruiters);\n          log(`Found ${linkedInRecruiters.recruiters.length} recruiters on LinkedIn`, 'success');\n        }\n      } catch (linkedInError) {\n        log(`LinkedIn search failed: ${linkedInError instanceof Error ? linkedInError.message : linkedInError}`, 'warn');\n      }\n\n      // Step 2: Check company careers/team page\n      log('Checking company careers/team page...', 'info');\n      try {\n        const companyWebsite = this.guessCompanyWebsite(companyName);\n\n        // Try careers page first\n        await page.goto(`${companyWebsite}/careers`, {\n          waitUntil: 'domcontentloaded',\n          timeoutMs: 20000,\n        });\n        await delay(2000);\n\n        const careersRecruiters = await this.stagehand.extract(\n          `Look for recruiting team members, HR contacts, or talent acquisition professionals on this page.\\n\\n` +\n          'Extract:\\n' +\n          '- Full name\\n' +\n          '- Job title\\n' +\n          '- Email (if publicly listed)\\n' +\n          '- Department they recruit for\\n\\n' +\n          'Also check for \"Contact Recruiting\", \"Meet Our Team\", or similar sections.',\n          RecruitersSchema\n        );\n\n        if (careersRecruiters?.recruiters?.length > 0) {\n          // Avoid duplicates by checking names\n          const existingNames = new Set(recruiters.map(r => r.name.toLowerCase()));\n          const newRecruiters = careersRecruiters.recruiters.filter(\n            r => !existingNames.has(r.name.toLowerCase())\n          );\n          recruiters.push(...newRecruiters);\n          log(`Found ${newRecruiters.length} additional recruiters on careers page`, 'success');\n        }\n      } catch (careersError) {\n        log(`Careers page search failed: ${careersError instanceof Error ? careersError.message : careersError}`, 'warn');\n      }\n\n      // Step 3: Try team/about page\n      try {\n        const companyWebsite = this.guessCompanyWebsite(companyName);\n        await page.goto(`${companyWebsite}/about`, {\n          waitUntil: 'domcontentloaded',\n          timeoutMs: 20000,\n        });\n        await delay(2000);\n\n        const teamRecruiters = await this.stagehand.extract(\n          `Look for HR, People Operations, or Recruiting team members on this about/team page.\\n\\n` +\n          'Extract:\\n' +\n          '- Full name\\n' +\n          '- Job title (look for titles with HR, Recruiting, Talent, People in them)\\n' +\n          '- LinkedIn URL (if available)\\n' +\n          '- Department\\n',\n          RecruitersSchema\n        );\n\n        if (teamRecruiters?.recruiters?.length > 0) {\n          const existingNames = new Set(recruiters.map(r => r.name.toLowerCase()));\n          const newRecruiters = teamRecruiters.recruiters.filter(\n            r => !existingNames.has(r.name.toLowerCase())\n          );\n          recruiters.push(...newRecruiters);\n          log(`Found ${newRecruiters.length} additional recruiters on about page`, 'success');\n        }\n      } catch (aboutError) {\n        log(`About page search failed: ${aboutError instanceof Error ? aboutError.message : aboutError}`, 'warn');\n      }\n\n      // Step 4: Use LLM knowledge as fallback for well-known companies\n      if (recruiters.length === 0) {\n        log('No recruiters found, using LLM knowledge...', 'info');\n        try {\n          const knowledgeRecruiters = await this.stagehand.extract(\n            `Based on your knowledge, who are some known recruiters or talent acquisition professionals at ${companyName}?\\n\\n` +\n            'For well-known companies, you may have information about:\\n' +\n            '- Head of Recruiting / Talent Acquisition\\n' +\n            '- Technical Recruiters\\n' +\n            '- University Recruiters\\n' +\n            '- HR Leadership\\n\\n' +\n            'Provide names and titles if known. Include LinkedIn URLs if you know them.',\n            RecruitersSchema\n          );\n\n          if (knowledgeRecruiters?.recruiters?.length > 0) {\n            recruiters.push(...knowledgeRecruiters.recruiters);\n            log(`Added ${knowledgeRecruiters.recruiters.length} recruiters from LLM knowledge`, 'success');\n          }\n        } catch (knowledgeError) {\n          log(`LLM knowledge extraction failed: ${knowledgeError instanceof Error ? knowledgeError.message : knowledgeError}`, 'warn');\n        }\n      }\n\n      log(`Total recruiters found: ${recruiters.length}`, 'success');\n      return recruiters.slice(0, 10); // Limit to 10 recruiters\n\n    } catch (error) {\n      log(`Failed to extract recruiters: ${error}`, 'error');\n      return [];\n    }\n  }\n\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1178, "column": 0}, "map": {"version":3,"sources":["file:///Users/nishibhagat/stagehandsdk/app/api/recruiters/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\nimport { ExaRecruiterFinder, isExaAvailable } from '../../../src/exa-recruiters';\nimport { CompanyResearcher } from '../../../src/scraper';\n\nexport const maxDuration = 300; // 5 minutes timeout\n\nexport async function POST(request: NextRequest) {\n  const startTime = Date.now();\n\n  try {\n    const body = await request.json() as { companyName?: string; useExa?: boolean };\n    const { companyName, useExa = true } = body;\n    const normalizedCompany = companyName?.trim();\n\n    if (!normalizedCompany) {\n      return NextResponse.json(\n        { error: 'Company name is required' },\n        { status: 400 }\n      );\n    }\n\n    console.log(`[Recruiters API] Starting recruiter search for: ${normalizedCompany}`);\n\n    let recruiters;\n    let method: string = 'none';\n\n    // Try Exa first (fast) if available\n    if (useExa && isExaAvailable()) {\n      console.log('[Recruiters API] Using Exa (fast mode)');\n      method = 'exa';\n\n      try {\n        const exaFinder = new ExaRecruiterFinder();\n        recruiters = await exaFinder.findRecruiters(normalizedCompany);\n      } catch (exaError) {\n        console.warn('[Recruiters API] Exa failed, falling back to Stagehand:', exaError);\n        method = 'stagehand-fallback';\n      }\n    }\n\n    // Fallback to Stagehand (browser-based)\n    if (!recruiters || recruiters.length === 0) {\n      if (!process.env.GOOGLE_API_KEY && !process.env.ANTHROPIC_API_KEY && !process.env.OPENAI_API_KEY) {\n        // If Exa found nothing and no LLM key, return empty\n        if (recruiters) {\n          const duration = ((Date.now() - startTime) / 1000).toFixed(2);\n          return NextResponse.json({\n            recruiters: [],\n            companyName: normalizedCompany,\n            searchDate: new Date().toISOString(),\n            meta: { method: method!, durationSeconds: parseFloat(duration) },\n          });\n        }\n        return NextResponse.json(\n          { error: 'No API key configured. Please add EXA_API_KEY or GOOGLE_API_KEY.' },\n          { status: 500 }\n        );\n      }\n\n      console.log('[Recruiters API] Using Stagehand (browser mode)');\n      method = method || 'stagehand';\n\n      const researcher = new CompanyResearcher(false);\n      try {\n        await researcher.initialize();\n        recruiters = await researcher.extractRecruiters(normalizedCompany);\n        await researcher.close();\n      } catch (stagehandError) {\n        try {\n          await researcher.close();\n        } catch {}\n        throw stagehandError;\n      }\n    }\n\n    const duration = ((Date.now() - startTime) / 1000).toFixed(2);\n    const filteredRecruiters = (recruiters || []).filter(isLikelyRecruiterProfile);\n    console.log(`[Recruiters API] Found ${filteredRecruiters.length} recruiters in ${duration}s using ${method}`);\n\n    return NextResponse.json({\n      recruiters: filteredRecruiters,\n      companyName: normalizedCompany,\n      searchDate: new Date().toISOString(),\n      meta: {\n        method,\n        durationSeconds: parseFloat(duration),\n      },\n    });\n  } catch (error) {\n    const errorMessage = error instanceof Error ? error.message : String(error);\n    console.error('[Recruiters API] Error:', errorMessage);\n\n    return NextResponse.json(\n      { error: errorMessage },\n      { status: 500 }\n    );\n  }\n}\n\nconst recruiterTitleKeywords = [\n  'recruiter',\n  'recruiting',\n  'talent acquisition',\n  'talent partner',\n  'people operations',\n  'people ops',\n  'sourcer',\n  'head of talent',\n  'hr',\n];\n\nfunction isLikelyRecruiterProfile(recruiter: { name?: string; title?: string; linkedInUrl?: string; email?: string }) {\n  if (!recruiter?.name || !recruiter?.title) {\n    return false;\n  }\n\n  const name = recruiter.name.trim();\n  if (!looksLikePersonName(name)) {\n    return false;\n  }\n\n  const titleLower = recruiter.title.toLowerCase();\n  if (!recruiterTitleKeywords.some(keyword => titleLower.includes(keyword))) {\n    return false;\n  }\n\n  const hasLinkedInProfile = recruiter.linkedInUrl?.includes('linkedin.com/in/') === true;\n  const hasWorkEmail = Boolean(recruiter.email);\n\n  return hasLinkedInProfile || hasWorkEmail;\n}\n\nfunction looksLikePersonName(name: string) {\n  const parts = name.split(/\\s+/).filter(Boolean);\n  if (parts.length < 2 || parts.length > 4) {\n    return false;\n  }\n\n  const invalidPatterns = [\n    /recruit/i,\n    /guide/i,\n    /jobs?/i,\n    /careers?/i,\n    /team/i,\n    /company/i,\n    /hiring/i,\n    /page/i,\n  ];\n\n  if (invalidPatterns.some(pattern => pattern.test(name))) {\n    return false;\n  }\n\n  return parts.every(part => /^[A-Z][a-zA-Z'-]+$/.test(part));\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;;;;AAEO,MAAM,cAAc,KAAK,oBAAoB;AAE7C,eAAe,KAAK,OAAoB;IAC7C,MAAM,YAAY,KAAK,GAAG;IAE1B,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,WAAW,EAAE,SAAS,IAAI,EAAE,GAAG;QACvC,MAAM,oBAAoB,aAAa;QAEvC,IAAI,CAAC,mBAAmB;YACtB,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAA2B,GACpC;gBAAE,QAAQ;YAAI;QAElB;QAEA,QAAQ,GAAG,CAAC,CAAC,gDAAgD,EAAE,mBAAmB;QAElF,IAAI;QACJ,IAAI,SAAiB;QAErB,oCAAoC;QACpC,IAAI,UAAU,IAAA,4IAAc,KAAI;YAC9B,QAAQ,GAAG,CAAC;YACZ,SAAS;YAET,IAAI;gBACF,MAAM,YAAY,IAAI,gJAAkB;gBACxC,aAAa,MAAM,UAAU,cAAc,CAAC;YAC9C,EAAE,OAAO,UAAU;gBACjB,QAAQ,IAAI,CAAC,2DAA2D;gBACxE,SAAS;YACX;QACF;QAEA,wCAAwC;QACxC,IAAI,CAAC,cAAc,WAAW,MAAM,KAAK,GAAG;YAC1C,IAAI,CAAC,QAAQ,GAAG,CAAC,cAAc,IAAI,CAAC,QAAQ,GAAG,CAAC,iBAAiB,IAAI,CAAC,QAAQ,GAAG,CAAC,cAAc,EAAE;gBAChG,oDAAoD;gBACpD,IAAI,YAAY;oBACd,MAAM,WAAW,CAAC,CAAC,KAAK,GAAG,KAAK,SAAS,IAAI,IAAI,EAAE,OAAO,CAAC;oBAC3D,OAAO,gJAAY,CAAC,IAAI,CAAC;wBACvB,YAAY,EAAE;wBACd,aAAa;wBACb,YAAY,IAAI,OAAO,WAAW;wBAClC,MAAM;4BAAE,QAAQ;4BAAS,iBAAiB,WAAW;wBAAU;oBACjE;gBACF;gBACA,OAAO,gJAAY,CAAC,IAAI,CACtB;oBAAE,OAAO;gBAAmE,GAC5E;oBAAE,QAAQ;gBAAI;YAElB;YAEA,QAAQ,GAAG,CAAC;YACZ,SAAS,UAAU;YAEnB,MAAM,aAAa,IAAI,qIAAiB,CAAC;YACzC,IAAI;gBACF,MAAM,WAAW,UAAU;gBAC3B,aAAa,MAAM,WAAW,iBAAiB,CAAC;gBAChD,MAAM,WAAW,KAAK;YACxB,EAAE,OAAO,gBAAgB;gBACvB,IAAI;oBACF,MAAM,WAAW,KAAK;gBACxB,EAAE,OAAM,CAAC;gBACT,MAAM;YACR;QACF;QAEA,MAAM,WAAW,CAAC,CAAC,KAAK,GAAG,KAAK,SAAS,IAAI,IAAI,EAAE,OAAO,CAAC;QAC3D,MAAM,qBAAqB,CAAC,cAAc,EAAE,EAAE,MAAM,CAAC;QACrD,QAAQ,GAAG,CAAC,CAAC,uBAAuB,EAAE,mBAAmB,MAAM,CAAC,eAAe,EAAE,SAAS,QAAQ,EAAE,QAAQ;QAE5G,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,YAAY;YACZ,aAAa;YACb,YAAY,IAAI,OAAO,WAAW;YAClC,MAAM;gBACJ;gBACA,iBAAiB,WAAW;YAC9B;QACF;IACF,EAAE,OAAO,OAAO;QACd,MAAM,eAAe,iBAAiB,QAAQ,MAAM,OAAO,GAAG,OAAO;QACrE,QAAQ,KAAK,CAAC,2BAA2B;QAEzC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAa,GACtB;YAAE,QAAQ;QAAI;IAElB;AACF;AAEA,MAAM,yBAAyB;IAC7B;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAED,SAAS,yBAAyB,SAAkF;IAClH,IAAI,CAAC,WAAW,QAAQ,CAAC,WAAW,OAAO;QACzC,OAAO;IACT;IAEA,MAAM,OAAO,UAAU,IAAI,CAAC,IAAI;IAChC,IAAI,CAAC,oBAAoB,OAAO;QAC9B,OAAO;IACT;IAEA,MAAM,aAAa,UAAU,KAAK,CAAC,WAAW;IAC9C,IAAI,CAAC,uBAAuB,IAAI,CAAC,CAAA,UAAW,WAAW,QAAQ,CAAC,WAAW;QACzE,OAAO;IACT;IAEA,MAAM,qBAAqB,UAAU,WAAW,EAAE,SAAS,wBAAwB;IACnF,MAAM,eAAe,QAAQ,UAAU,KAAK;IAE5C,OAAO,sBAAsB;AAC/B;AAEA,SAAS,oBAAoB,IAAY;IACvC,MAAM,QAAQ,KAAK,KAAK,CAAC,OAAO,MAAM,CAAC;IACvC,IAAI,MAAM,MAAM,GAAG,KAAK,MAAM,MAAM,GAAG,GAAG;QACxC,OAAO;IACT;IAEA,MAAM,kBAAkB;QACtB;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IAED,IAAI,gBAAgB,IAAI,CAAC,CAAA,UAAW,QAAQ,IAAI,CAAC,QAAQ;QACvD,OAAO;IACT;IAEA,OAAO,MAAM,KAAK,CAAC,CAAA,OAAQ,qBAAqB,IAAI,CAAC;AACvD"}}]
}