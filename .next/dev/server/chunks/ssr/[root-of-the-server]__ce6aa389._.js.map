{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/nishibhagat/stagehandsdk/app/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport Link from 'next/link';\n\ninterface ApiStatus {\n  status: string;\n  hasApiKey: boolean;\n  provider?: string;\n}\n\nexport default function HomePage() {\n  const [companyName, setCompanyName] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [apiStatus, setApiStatus] = useState<ApiStatus | null>(null);\n  const [error, setError] = useState<string | null>(null);\n  const [markdown, setMarkdown] = useState<string | null>(null);\n  const [activeTab, setActiveTab] = useState<'preview' | 'text'>('preview');\n\n  useEffect(() => {\n    checkApiStatus();\n  }, []);\n\n  const checkApiStatus = async () => {\n    try {\n      const res = await fetch('/api/health');\n      const data = await res.json() as ApiStatus;\n      setApiStatus(data);\n    } catch {\n      setApiStatus({ status: 'error', hasApiKey: false });\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!companyName.trim()) return;\n\n    setIsLoading(true);\n    setError(null);\n    setMarkdown(null);\n\n    try {\n      const res = await fetch('/api/research', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ companyName: companyName.trim() }),\n      });\n\n      const data = await res.json() as { markdown?: string; error?: string; message?: string };\n\n      if (!res.ok) {\n        throw new Error(data.error || data.message || 'Research failed');\n      }\n\n      setMarkdown(data.markdown || null);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'An error occurred');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const fillExample = (name: string) => {\n    setCompanyName(name);\n  };\n\n  const resetForm = () => {\n    setCompanyName('');\n    setError(null);\n    setMarkdown(null);\n  };\n\n  const downloadMarkdown = () => {\n    if (!markdown) return;\n    const blob = new Blob([markdown], { type: 'text/plain' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `${companyName.replace(/\\s+/g, '-').toLowerCase()}-research-${new Date().toISOString().split('T')[0]}.txt`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  };\n\n  const renderPlainText = (text: string): string => {\n    const escapeHtml = (value: string) =>\n      value\n        .replace(/&/g, '&amp;')\n        .replace(/</g, '&lt;')\n        .replace(/>/g, '&gt;')\n        .replace(/\"/g, '&quot;')\n        .replace(/'/g, '&#39;');\n\n    const linkify = (value: string) => {\n      const escaped = escapeHtml(value);\n      return escaped.replace(\n        /(https?:\\/\\/[^\\s]+)/g,\n        '<a href=\"$1\" target=\"_blank\" rel=\"noreferrer\">$1</a>'\n      );\n    };\n\n    const sectionHeaders = new Set([\n      'Overview',\n      'Mission',\n      'Details',\n      'Competitors',\n      'Technology Stack',\n      'Recent News',\n      'Key Facts',\n      'Company Overview',\n    ]);\n\n    const lines = text.split(/\\r?\\n/);\n    const htmlParts: string[] = [];\n    let inSection = false;\n    let inMeta = false;\n\n    const closeSection = () => {\n      if (!inSection) return;\n      htmlParts.push('</div>');\n      inSection = false;\n    };\n\n    const closeMeta = () => {\n      if (!inMeta) return;\n      htmlParts.push('</div>');\n      inMeta = false;\n    };\n\n    const openSection = (title: string) => {\n      closeMeta();\n      closeSection();\n      htmlParts.push('<div class=\"text-block\">');\n      htmlParts.push(`<div class=\"block-header\">${escapeHtml(title)}</div>`);\n      inSection = true;\n    };\n\n    const openMeta = () => {\n      if (inMeta) return;\n      closeSection();\n      htmlParts.push('<div class=\"text-block meta-block\">');\n      inMeta = true;\n    };\n\n    lines.forEach((line) => {\n      const trimmed = line.trim();\n      if (!trimmed) {\n        if (inSection || inMeta) {\n          htmlParts.push('<div class=\"block-gap\"></div>');\n        }\n        return;\n      }\n\n      if (trimmed === 'Company Research Report') {\n        closeMeta();\n        closeSection();\n        htmlParts.push(`<div class=\"report-title\">${escapeHtml(trimmed)}</div>`);\n        return;\n      }\n\n      if (sectionHeaders.has(trimmed)) {\n        openSection(trimmed);\n        return;\n      }\n\n      if (trimmed.startsWith('Company:') || trimmed.startsWith('Report Date:')) {\n        openMeta();\n        htmlParts.push(`<div class=\"text-line\">${linkify(trimmed)}</div>`);\n        return;\n      }\n\n      if (!inSection && !inMeta) {\n        openSection('Summary');\n      }\n\n      htmlParts.push(`<div class=\"text-line\">${linkify(trimmed)}</div>`);\n    });\n\n    closeMeta();\n    closeSection();\n\n    return htmlParts.join('\\n');\n  };\n\n  return (\n    <div className=\"container\">\n      <header>\n        <h1>One-Stop Recruiting Guide</h1>\n        <p className=\"subtitle\">\n          Holistic tool to help job-seekers find company information and recruiters to reach out to!\n        </p>\n        <nav className=\"nav-links\">\n          <Link href=\"/\" className=\"nav-link active\">Company Research</Link>\n          <Link href=\"/recruiters\" className=\"nav-link\">Recruiter Finder</Link>\n        </nav>\n      </header>\n\n      <div className={`api-status ${apiStatus?.hasApiKey ? '' : 'error'}`}>\n        <span className=\"status-indicator\"></span>\n        <span>\n          {apiStatus === null\n            ? 'Checking API status...'\n            : apiStatus.hasApiKey\n            ? `API Ready (${apiStatus.provider})`\n            : 'API keys not configured'}\n        </span>\n      </div>\n\n      {!markdown && !error && (\n        <div className=\"search-section\">\n          <form onSubmit={handleSubmit}>\n            <div className=\"form-group\">\n              <label htmlFor=\"companyName\">Company Name</label>\n              <input\n                type=\"text\"\n                id=\"companyName\"\n                value={companyName}\n                onChange={(e) => setCompanyName(e.target.value)}\n                placeholder=\"e.g., Stripe, Anthropic, OpenAI\"\n                required\n                disabled={isLoading}\n              />\n            </div>\n            <button type=\"submit\" className=\"btn-primary\" disabled={isLoading || !apiStatus?.hasApiKey}>\n              {isLoading ? 'Researching...' : 'Start Research'}\n            </button>\n          </form>\n\n          <div className=\"examples\">\n            <p>Try: </p>\n            <button className=\"example-btn\" onClick={() => fillExample('Stripe')}>Stripe</button>\n            <button className=\"example-btn\" onClick={() => fillExample('Anthropic')}>Anthropic</button>\n            <button className=\"example-btn\" onClick={() => fillExample('OpenAI')}>OpenAI</button>\n            <button className=\"example-btn\" onClick={() => fillExample('Shopify')}>Shopify</button>\n          </div>\n        </div>\n      )}\n\n      {isLoading && (\n        <div className=\"progress-section\">\n          <div className=\"progress-bar\">\n            <div className=\"progress-fill\"></div>\n          </div>\n          <p className=\"progress-text\">Researching {companyName}... This may take 30-60 seconds</p>\n        </div>\n      )}\n\n      {error && (\n        <div className=\"error-section\">\n          <h3>Error</h3>\n          <p>{error}</p>\n          <button onClick={resetForm} className=\"btn-secondary\">Try Again</button>\n        </div>\n      )}\n\n      {markdown && (\n        <div className=\"results-section\">\n          <div className=\"results-header\">\n            <h2>Research Results</h2>\n            <button onClick={downloadMarkdown} className=\"btn-secondary\" style={{ width: 'auto' }}>\n              Download Report\n            </button>\n          </div>\n\n          <div className=\"tabs\">\n            <button\n              className={`tab-btn ${activeTab === 'preview' ? 'active' : ''}`}\n              onClick={() => setActiveTab('preview')}\n            >\n              Preview\n            </button>\n            <button\n              className={`tab-btn ${activeTab === 'text' ? 'active' : ''}`}\n              onClick={() => setActiveTab('text')}\n            >\n              Text\n            </button>\n          </div>\n\n          <div className={`tab-content ${activeTab === 'preview' ? 'active' : ''}`}>\n            <div\n              className=\"plain-content\"\n              dangerouslySetInnerHTML={{ __html: renderPlainText(markdown) }}\n            />\n          </div>\n\n          <div className={`tab-content ${activeTab === 'text' ? 'active' : ''}`}>\n            <pre className=\"text-content\">{markdown}</pre>\n          </div>\n\n          <button onClick={resetForm} className=\"btn-primary\" style={{ marginTop: '20px' }}>\n            Research Another Company\n          </button>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}