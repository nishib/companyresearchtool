module.exports=[42461,e=>{"use strict";var t=e.i(47909),a=e.i(74017),r=e.i(96250),s=e.i(59756),n=e.i(61916),o=e.i(74677),i=e.i(69741),l=e.i(16795),c=e.i(87718),u=e.i(95169),d=e.i(47587),p=e.i(66012),h=e.i(70101),m=e.i(26937),g=e.i(10372),f=e.i(93695);e.i(52474);var w=e.i(220),x=e.i(89171),y=e.i(93280),E=e.i(99730);class R{exa;constructor(){const e=process.env.EXA_API_KEY;if(!e)throw Error("EXA_API_KEY is required for fast search");this.exa=new y.default(e)}async research(e){(0,E.log)(`[Exa] Starting fast research for: ${e}`,"info");let t=Date.now(),[a,r,s,n]=await Promise.all([this.extractCompanyInfo(e),this.extractNews(e),this.extractCompetitors(e),this.extractTechStack(e)]),o=((Date.now()-t)/1e3).toFixed(2);return(0,E.log)(`[Exa] Research completed in ${o}s`,"success"),{companyInfo:a,news:r,techStack:n,competitors:s,researchDate:new Date().toISOString()}}async extractCompanyInfo(e){(0,E.log)("[Exa] Extracting company info...","info");try{let t=await this.exa.searchAndContents(`${e} company official website about`,{type:"auto",numResults:3,category:"company",text:{maxCharacters:2e3},summary:!0,livecrawl:"preferred"}),a=await this.exa.searchAndContents(`${e} headquarters location industry founded`,{type:"auto",numResults:3,text:{maxCharacters:1e3},summary:!0}),r=t.results[0],s=a.results[0],n=r?.summary||r?.text?.slice(0,500)||`${e} is a technology company.`,o=(s?.summary||s?.text||"").toLowerCase(),i="Not specified";for(let e of[/headquartered in ([^,.]+)/i,/headquarters in ([^,.]+)/i,/based in ([^,.]+)/i,/located in ([^,.]+)/i]){let t=o.match(e);if(t){i=t[1].trim();break}}let l="Technology";for(let e of["fintech","ai","artificial intelligence","e-commerce","saas","payments","cloud","software","healthcare","biotech"])if(o.includes(e)){l=e.charAt(0).toUpperCase()+e.slice(1);break}let c={name:e,description:n,mission:r?.text?.slice(0,300)||n,headquarters:i,industry:l,website:r?.url||`https://www.${e.toLowerCase().replace(/\s+/g,"")}.com`};return(0,E.log)("[Exa] Company info extracted","success"),c}catch(t){return(0,E.log)(`[Exa] Failed to extract company info: ${t}`,"warn"),{name:e,description:`${e} is a technology company.`,mission:"Information not available",headquarters:"Not specified",industry:"Technology",website:`https://www.${e.toLowerCase().replace(/\s+/g,"")}.com`}}}async extractNews(e){(0,E.log)("[Exa] Extracting news...","info");try{let t=(await this.exa.searchAndContents(`${e} company news announcement`,{type:"auto",numResults:5,category:"news",text:{maxCharacters:500},summary:!0,livecrawl:"preferred"})).results.map(e=>({title:e.title||"Untitled",date:e.publishedDate||new Date().toISOString().split("T")[0],source:new URL(e.url).hostname.replace("www.",""),summary:e.summary||e.text?.slice(0,200)||"No summary available",url:e.url}));return(0,E.log)(`[Exa] Found ${t.length} news items`,"success"),t}catch(e){return(0,E.log)(`[Exa] Failed to extract news: ${e}`,"warn"),[]}}async extractCompetitors(e){(0,E.log)("[Exa] Extracting competitors...","info");try{let t=await this.exa.searchAndContents(`${e} competitors alternatives similar companies`,{type:"auto",numResults:7,category:"company",text:{maxCharacters:500},summary:!0}),a=await this.exa.searchAndContents(`"${e}" competitor analysis market`,{type:"auto",numResults:3,text:{maxCharacters:1e3},summary:!0}),r=[],s=new Set([e.toLowerCase()]),n=a.results[0]?.text||a.results[0]?.summary||"";for(let t of[/competitors?\s+(?:include|are|such as)\s+([^.]+)/gi,/competes?\s+with\s+([^.]+)/gi,/alternatives?\s+(?:to|include)\s+([^.]+)/gi])for(let a of n.matchAll(t))for(let t of a[1].split(/,|and/).map(e=>e.trim()).filter(e=>e.length>2&&e.length<50))s.has(t.toLowerCase())||(s.add(t.toLowerCase()),r.push({name:t,description:`Competitor in the same market as ${e}`,website:null}));for(let a of t.results){let t=a.title?.split(/[-â€“|]/)[0]?.trim()||"";t&&!s.has(t.toLowerCase())&&t.toLowerCase()!==e.toLowerCase()&&(s.add(t.toLowerCase()),r.push({name:t,description:a.summary||a.text?.slice(0,200)||"No description available",website:a.url}))}return(0,E.log)(`[Exa] Found ${r.length} competitors`,"success"),r.slice(0,7)}catch(e){return(0,E.log)(`[Exa] Failed to extract competitors: ${e}`,"warn"),[]}}async extractTechStack(e){(0,E.log)("[Exa] Extracting tech stack...","info");try{let t=await this.exa.searchAndContents(`${e} engineering tech stack technologies programming languages`,{type:"auto",numResults:5,text:{maxCharacters:1500},summary:!0}),a=await this.exa.searchAndContents(`${e} careers jobs software engineer requirements`,{type:"auto",numResults:3,text:{maxCharacters:1e3}}),r=[...t.results.map(e=>e.text||e.summary||""),...a.results.map(e=>e.text||"")].join(" ").toLowerCase(),s={languages:["python","javascript","typescript","java","go","golang","rust","c++","ruby","scala","kotlin","swift","php"].filter(e=>r.includes(e)),frameworks:["react","next.js","vue","angular","django","flask","express","fastapi","spring","rails","node.js","tensorflow","pytorch"].filter(e=>r.includes(e.toLowerCase())),tools:["docker","kubernetes","git","jenkins","terraform","ansible","grafana","prometheus","elasticsearch","redis","kafka","rabbitmq"].filter(e=>r.includes(e)),infrastructure:["aws","gcp","azure","cloudflare","vercel","heroku","digitalocean","mongodb","postgresql","mysql","dynamodb","s3"].filter(e=>r.includes(e))};return(0,E.log)("[Exa] Tech stack extracted","success"),s}catch(e){return(0,E.log)(`[Exa] Failed to extract tech stack: ${e}`,"warn"),{languages:[],frameworks:[],tools:[],infrastructure:[]}}}}var C=e.i(38851),v=e.i(24868);class A{async generateMarkdown(e){let{companyInfo:t,news:a,techStack:r,competitors:s,researchDate:n}=e,o="";return o+=`# ${t.name} - Company Research Report

**Research Date:** ${(0,E.formatDate)()}

---

## ðŸ“‹ Company Overview

**Mission:** ${t.mission}

${t.description}

`,(t.headquarters||t.industry||t.website)&&(o+=`### Key Facts

`,t.headquarters&&(o+=`- **Headquarters:** ${t.headquarters}
`),t.industry&&(o+=`- **Industry:** ${t.industry}
`),t.website&&(o+=`- **Website:** ${t.website}
`),o+=`
`),o+=`---

## ðŸ“° Recent News

`,a.length>0?a.forEach((e,t)=>{o+=`### ${t+1}. ${e.title}

**Date:** ${e.date} | **Source:** ${e.source}

${e.summary}

`,e.url&&(o+=`[Read more](${e.url})

`)}):o+=`*No recent news found*

`,o+=`---

## ðŸ’» Technology Stack

`,r.languages.length>0&&(o+=`### Programming Languages

`,r.languages.forEach(e=>{o+=`- ${e}
`}),o+=`
`),r.frameworks.length>0&&(o+=`### Frameworks & Libraries

`,r.frameworks.forEach(e=>{o+=`- ${e}
`}),o+=`
`),r.tools.length>0&&(o+=`### Tools & Platforms

`,r.tools.forEach(e=>{o+=`- ${e}
`}),o+=`
`),r.infrastructure.length>0&&(o+=`### Infrastructure

`,r.infrastructure.forEach(e=>{o+=`- ${e}
`}),o+=`
`),0===r.languages.length&&0===r.frameworks.length&&0===r.tools.length&&0===r.infrastructure.length&&(o+=`*Tech stack information not found*

`),o+=`---

## ðŸ¢ Competitors

`,s.length>0?s.forEach(e=>{o+=`### ${e.name}

`,e.description&&(o+=`${e.description}

`),e.website&&(o+=`- **Website:** ${e.website}

`)}):o+=`*Competitor information not found*

`,o+=`---

*Report generated on ${n} using automated research tools*
`}async saveReport(e,t){let a=await this.generateMarkdown(e),r=t||`${(0,E.sanitizeFilename)(e.companyInfo.name)}-research-${(0,E.formatDate)()}.md`;return await (0,v.writeFile)(r,a,"utf-8"),(0,E.log)(`Report saved to: ${r}`,"success"),r}async displayReport(e){console.log("\n"+await this.generateMarkdown(e))}}async function $(e){let t=Date.now();try{let a,{companyName:r,useExa:s=!0}=await e.json();if(!r)return x.NextResponse.json({error:"Company name is required"},{status:400});console.log(`[Research API] Starting research for: ${r}`);let n="none";if(s&&process.env.EXA_API_KEY){console.log("[Research API] Using Exa (fast mode)"),n="exa";try{let e=new R;a=await e.research(r)}catch(e){console.warn("[Research API] Exa failed, falling back to Stagehand:",e),n="stagehand-fallback"}}if(!a){if(!process.env.GOOGLE_API_KEY&&!process.env.ANTHROPIC_API_KEY&&!process.env.OPENAI_API_KEY)return x.NextResponse.json({error:"No API key configured. Please add EXA_API_KEY or GOOGLE_API_KEY."},{status:500});console.log("[Research API] Using Stagehand (browser mode)"),n=n||"stagehand";let e=new C.CompanyResearcher(!1);try{await e.initialize(),a=await e.research(r),await e.close()}catch(t){try{await e.close()}catch{}throw t}}let o=new A,i=await o.generateMarkdown(a),l=((Date.now()-t)/1e3).toFixed(2);return console.log(`[Research API] Completed in ${l}s using ${n}`),x.NextResponse.json({markdown:i,report:a,meta:{method:n,durationSeconds:parseFloat(l)}})}catch(t){let e=t instanceof Error?t.message:String(t);return console.error("[Research API] Error:",e),x.NextResponse.json({error:e},{status:500})}}e.s(["POST",()=>$,"maxDuration",0,300],5012);var b=e.i(5012);let k=new t.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/research/route",pathname:"/api/research",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/app/api/research/route.ts",nextConfigOutput:"",userland:b}),{workAsyncStorage:P,workUnitAsyncStorage:I,serverHooks:N}=k;function _(){return(0,r.patchFetch)({workAsyncStorage:P,workUnitAsyncStorage:I})}async function S(e,t,r){k.isDev&&(0,s.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let x="/api/research/route";x=x.replace(/\/index$/,"")||"/";let y=await k.prepare(e,t,{srcPage:x,multiZoneDraftMode:!1});if(!y)return t.statusCode=400,t.end("Bad Request"),null==r.waitUntil||r.waitUntil.call(r,Promise.resolve()),null;let{buildId:E,params:R,nextConfig:C,parsedUrl:v,isDraftMode:A,prerenderManifest:$,routerServerContext:b,isOnDemandRevalidate:P,revalidateOnlyGenerated:I,resolvedPathname:N,clientReferenceManifest:_,serverActionsManifest:S}=y,T=(0,i.normalizeAppPath)(x),O=!!($.dynamicRoutes[T]||$.routes[N]),q=async()=>((null==b?void 0:b.render404)?await b.render404(e,t,v,!1):t.end("This page could not be found"),null);if(O&&!A){let e=!!$.routes[N],t=$.dynamicRoutes[T];if(t&&!1===t.fallback&&!e){if(C.experimental.adapterPath)return await q();throw new f.NoFallbackError}}let D=null;!O||k.isDev||A||(D="/index"===(D=N)?"/":D);let L=!0===k.isDev||!O,F=O&&!L;S&&_&&(0,o.setManifestsSingleton)({page:x,clientReferenceManifest:_,serverActionsManifest:S});let U=e.method||"GET",j=(0,n.getTracer)(),H=j.getActiveScopeSpan(),K={params:R,prerenderManifest:$,renderOpts:{experimental:{authInterrupts:!!C.experimental.authInterrupts},cacheComponents:!!C.cacheComponents,supportsDynamicResponse:L,incrementalCache:(0,s.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:C.cacheLife,waitUntil:r.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,a,r,s)=>k.onRequestError(e,t,r,s,b)},sharedContext:{buildId:E}},M=new l.NodeNextRequest(e),Y=new l.NodeNextResponse(t),G=c.NextRequestAdapter.fromNodeNextRequest(M,(0,c.signalFromNodeResponse)(t));try{let o=async e=>k.handle(G,K).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let a=j.getRootSpanAttributes();if(!a)return;if(a.get("next.span_type")!==u.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${a.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let r=a.get("next.route");if(r){let t=`${U} ${r}`;e.setAttributes({"next.route":r,"http.route":r,"next.span_name":t}),e.updateName(t)}else e.updateName(`${U} ${x}`)}),i=!!(0,s.getRequestMeta)(e,"minimalMode"),l=async s=>{var n,l;let c=async({previousCacheEntry:a})=>{try{if(!i&&P&&I&&!a)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let n=await o(s);e.fetchMetrics=K.renderOpts.fetchMetrics;let l=K.renderOpts.pendingWaitUntil;l&&r.waitUntil&&(r.waitUntil(l),l=void 0);let c=K.renderOpts.collectedTags;if(!O)return await (0,p.sendResponse)(M,Y,n,K.renderOpts.pendingWaitUntil),null;{let e=await n.blob(),t=(0,h.toNodeOutgoingHttpHeaders)(n.headers);c&&(t[g.NEXT_CACHE_TAGS_HEADER]=c),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let a=void 0!==K.renderOpts.collectedRevalidate&&!(K.renderOpts.collectedRevalidate>=g.INFINITE_CACHE)&&K.renderOpts.collectedRevalidate,r=void 0===K.renderOpts.collectedExpire||K.renderOpts.collectedExpire>=g.INFINITE_CACHE?void 0:K.renderOpts.collectedExpire;return{value:{kind:w.CachedRouteKind.APP_ROUTE,status:n.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:a,expire:r}}}}catch(t){throw(null==a?void 0:a.isStale)&&await k.onRequestError(e,t,{routerKind:"App Router",routePath:x,routeType:"route",revalidateReason:(0,d.getRevalidateReason)({isStaticGeneration:F,isOnDemandRevalidate:P})},!1,b),t}},u=await k.handleResponse({req:e,nextConfig:C,cacheKey:D,routeKind:a.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:$,isRoutePPREnabled:!1,isOnDemandRevalidate:P,revalidateOnlyGenerated:I,responseGenerator:c,waitUntil:r.waitUntil,isMinimalMode:i});if(!O)return null;if((null==u||null==(n=u.value)?void 0:n.kind)!==w.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==u||null==(l=u.value)?void 0:l.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});i||t.setHeader("x-nextjs-cache",P?"REVALIDATED":u.isMiss?"MISS":u.isStale?"STALE":"HIT"),A&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let f=(0,h.fromNodeOutgoingHttpHeaders)(u.value.headers);return i&&O||f.delete(g.NEXT_CACHE_TAGS_HEADER),!u.cacheControl||t.getHeader("Cache-Control")||f.get("Cache-Control")||f.set("Cache-Control",(0,m.getCacheControlHeader)(u.cacheControl)),await (0,p.sendResponse)(M,Y,new Response(u.value.body,{headers:f,status:u.value.status||200})),null};H?await l(H):await j.withPropagatedContext(e.headers,()=>j.trace(u.BaseServerSpan.handleRequest,{spanName:`${U} ${x}`,kind:n.SpanKind.SERVER,attributes:{"http.method":U,"http.target":e.url}},l))}catch(t){if(t instanceof f.NoFallbackError||await k.onRequestError(e,t,{routerKind:"App Router",routePath:T,routeType:"route",revalidateReason:(0,d.getRevalidateReason)({isStaticGeneration:F,isOnDemandRevalidate:P})},!1,b),O)throw t;return await (0,p.sendResponse)(M,Y,new Response(null,{status:500})),null}}e.s(["handler",()=>S,"patchFetch",()=>_,"routeModule",()=>k,"serverHooks",()=>N,"workAsyncStorage",()=>P,"workUnitAsyncStorage",()=>I],42461)}];

//# sourceMappingURL=node_modules_next_dist_esm_build_templates_app-route_d1709462.js.map